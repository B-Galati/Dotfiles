#!/bin/bash

CONTAINER_NAME="evernote"
RUNNING=$(docker inspect --format="{{ .State.Running }}" $CONTAINER_NAME 2> /dev/null)

case "$1" in
        start)
                if [ "$RUNNING" == "true" ]; then
                        echo "already running..."
                        exit 2
                fi

                if [ "$RUNNING" == "false" ]; then
                        echo "starting container..."
                        docker start $CONTAINER_NAME
			docker exec -it $CONTAINER_NAME wine .wine/drive_c/Program\ Files/Evernote/Evernote/Evernote.exe
                else
                        echo "running container..."
			docker run  -it  \
				-v /tmp/.X11-unix:/tmp/.X11-unix \
				-v $HOME/evernote_backup:/root/evernote \
				-e DISPLAY=unix$DISPLAY \
				--cpuset-cpus 0
				--name $CONTAINER_NAME \
				benoitg/evernote
                fi
        ;;

        stop)
                echo "Stoping container..."
                docker stop $CONTAINER_NAME
        ;;

        rm)
                echo "Deleting container..."
                docker rm -v $CONTAINER_NAME
        ;;

        *)
                echo "Usage: $0 {start|stop|rm}"
                exit 1
        ;;
esac

