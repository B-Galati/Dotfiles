#!/bin/bash

CONTAINER_NAME="plex"
RUNNING=$(docker inspect --format="{{ .State.Running }}" $CONTAINER_NAME 2> /dev/null)

case "$1" in
    start)
        if [ "$RUNNING" == "true" ]; then
            echo "already running..."
            exit 2
        fi

        if [ "$RUNNING" == "false" ]; then
            echo "starting container..."
            docker start $CONTAINER_NAME
        else
            echo "running container..."
            docker run -it --name plex \
                -h plex-benoit \
                -v $HOME/.config/plex:/config \
                -v /media/benoit/Documents/Films/:/data/Films \
                -v /media/benoit/Documents/Séries:/data/Séries \
                -p 32400:32400 \
                timhaak/plex
        fi
    ;;

    stop)
        echo "Stoping container..."
        docker stop $CONTAINER_NAME
    ;;

    rm)
        echo "Deleting container..."
        docker rm -v $CONTAINER_NAME
    ;;

    *)
        echo "Usage: $0 {start|stop|rm}"
        exit 1
    ;;
esac
